{%- from "fluent-bit/map.jinja" import fluent_bit with context -%}
description "{{ fluent_bit.pkg }} log collection service"

start on started network-services
stop on runlevel [!2345]
setgid nogroup

# Set reasonable file limits
limit nofile 65536 65536

# Restart automatically on crash
respawn

console log

exec /usr/local/bin/{{ fluent_bit.pkg }} -c /etc/{{ fluent_bit.pkg }}/{{ fluent_bit.pkg }}.conf -R /etc/{{ fluent_bit.pkg }}/parsers.conf
